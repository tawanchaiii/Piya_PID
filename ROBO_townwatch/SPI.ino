
 int SP = 0;
 int calSP = 0;
 int calSPL = 0;
void setup_spi()
{
  pinMode(PWML,OUTPUT);
  pinMode(IN1L,OUTPUT);
  pinMode(IN2L,OUTPUT);
  
  pinMode(PWMR,OUTPUT); 
  pinMode(IN1R,OUTPUT);
  pinMode(IN2R,OUTPUT); 
 
   adc.begin(i, k, j, m ); // Software SPI  (sck, mosi, miso, cs);
   adc.begin(i, k, j, n ); 
}

void read_sensor_F()    ////////////////////////////////กำหนดค่าตัวแปรในการอ่าน SPI แผงหน้า
{  
    adc.begin(i, k, j, m );
 A0 = adc.readADC(0); 
 A1 = adc.readADC(1);
 A2 = adc.readADC(2);
 A3 = adc.readADC(3);
 A4 = adc.readADC(4); 
 A5 = adc.readADC(5);
 A6 = adc.readADC(6);
 A7 = adc.readADC(7);
}


void read_sensor_B()    ////////////////////////////////กำหนดค่าตัวแปรในการอ่าน SPI แผงหลัง
{  
    adc.begin(i, k, j, n );
 A0 = adc.readADC(0); 
 A1 = adc.readADC(1);
 A2 = adc.readADC(2);
 A3 = adc.readADC(3);
 A4 = adc.readADC(4); 
 A5 = adc.readADC(5);
 A6 = adc.readADC(6);
 A7 = adc.readADC(7);
}
int analogg(int a){
  return  adc.readADC(a); 
}

void read_sensor_Bdisplay()   ////////////////////////////////กำหนดค่าตัวแปรในการอ่าน SPI แผงหลัง (ในการแสดงผลหน้าจอ)
{
  
    adc.begin(i, k, j, n );
 Z0 = adc.readADC(0); 
 Z1 = adc.readADC(1);
 Z2 = adc.readADC(2);
 Z3 = adc.readADC(3);
 Z4 = adc.readADC(4); 
 Z5 = adc.readADC(5);
 Z6 = adc.readADC(6);
 Z7 = adc.readADC(7);
}

void loop_spi(){}



   


void track_F_R(int calSP, int KP, int timer)          /////////////////////////////เดินหน้าตามเส้น แทร็คด้านขวา 

{
do
  {
    T++;
             read_sensor_values_F_R();
            
              P = error;
              I = I + previous_I;
              D = error - previous_error;    
              PID_value = (KP*P) + (0.0015*I) + (60*D);     
              previous_I=I;
              previous_error=error;
              
            Motor(calSP + PID_value,  calSP  - PID_value); 
    }
    while (T<(timer)*20);
    T=0;
  
}




void read_sensor_values_F()  /////////กำหนดค่า error ให้กับเซนเซอร์
{ 
    read_sensor_F();
    
if((A0<200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-6;
else if((A0<200)&&(A1<200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-6;
else if((A0>=200)&&(A1<200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-5;
else if((A0>=200)&&(A1<200)&&(A2<200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-4;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-3;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3<200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-2;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4<200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=0;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<200)&&(A5<200)&&(A6>=200)&&(A7>=200))error=2;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<200)&&(A6>=200)&&(A7>=200))error=3;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<200)&&(A6<200)&&(A7>=200))error=4;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6<200)&&(A7>=200))error=5;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6<200)&&(A7<200))error=6;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7<200))error=6;

}

void read_sensor_values_L()
{ 
    read_sensor_F();
    
if((A7>=200)&&(A6<200))error=3;
else if((A7>=200)&&(A6<200)&&(A5<200))error=2;
else if((A7>=200)&&(A6>=200)&&(A5<200)&&(A4<200))error=1;
else if((A7>=200)&&(A6>=200)&&(A5>=200)&&(A4<200)&&(A3<100))error=0;
else if((A7>=200)&&(A6>=200)&&(A5>=200)&&(A4>=200)&&(A3<100))error=-2;
else if((A7>=200)&&(A6>=200)&&(A5>=200)&&(A4>=200)&&(A3>=200)&&(A2<100))error=-3;
else if((A7>=200)&&(A6>=200)&&(A5>=200)&&(A4>=200)&&(A3>=200)&&(A2<100)&&(A1<100))error=-4;


}

void read_sensor_values_R()
{ 
    read_sensor_F();
    
if((A0>=200)&&(A1<200)&&(A2<200))error=-3;
else if((A0>=200)&&(A1<200)&&(A2<200))error=-2;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3<200))error=-1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4<100))error=0;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<100))error=2;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<100))error=3;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<100)&&(A6<100))error=4;


}

void read_sensor_values_F_R()
{ 
    read_sensor_F();
    
if((A0<200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-7;
else if((A0<200)&&(A1<200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-6;
else if((A0>=200)&&(A1<200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-6;
else if((A0>=200)&&(A1<200)&&(A2<200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-5;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-5;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3<200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-4;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-4;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4<200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-3;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-2;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<200)&&(A5<200)&&(A6>=200)&&(A7>=200))error=-1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<200)&&(A6>=200)&&(A7>=200))error=0;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<200)&&(A6<200)&&(A7>=200))error=0;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6<200)&&(A7>=200))error=1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6<200)&&(A7<200))error=2;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7<200))error=4;
}

void read_sensor_values_B()
{
   
    read_sensor_B();
if((A0<200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-8;
else if((A0<200)&&(A1<200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-6;
else if((A0>=200)&&(A1<200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-5;
else if((A0>=200)&&(A1<200)&&(A2<200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-4;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-3;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3<200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-2;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4<200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=0;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<200)&&(A5<200)&&(A6>=200)&&(A7>=200))error=2;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<200)&&(A6>=200)&&(A7>=200))error=3;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<200)&&(A6<200)&&(A7>=200))error=4;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6<200)&&(A7>=200))error=5;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6<200)&&(A7<200))error=6;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7<200))error=8;
}

void read_sensor_values_B_R()
{ 
    read_sensor_B();
    
if((A0<200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-8;
else if((A0<200)&&(A1<200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-7;
else if((A0>=200)&&(A1<200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-7;
else if((A0>=200)&&(A1<200)&&(A2<200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-7;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-7;
else if((A0>=200)&&(A1>=200)&&(A2<200)&&(A3<200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-7;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-6;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3<200)&&(A4<200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-5;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<200)&&(A5>=200)&&(A6>=200)&&(A7>=200))error=-4;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4<200)&&(A5<200)&&(A6>=200)&&(A7>=200))error=-3;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<200)&&(A6>=200)&&(A7>=200))error=-2;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5<200)&&(A6<200)&&(A7>=200))error=-1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6<200)&&(A7>=200))error=0;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6<200)&&(A7<200))error=1;
else if((A0>=200)&&(A1>=200)&&(A2>=200)&&(A3>=200)&&(A4>=200)&&(A5>=200)&&(A6>=200)&&(A7<200))error=6;
}
